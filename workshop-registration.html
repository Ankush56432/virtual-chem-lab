<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workshop Registration | VirtualChemLab</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Space Grotesk', sans-serif;
      background: #ffffff;
      color: #1f2937;
    }

    /* Navbar - White */
    .navbar {
      background: #ffffff !important;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 1rem 0;
    }

    .navbar-brand {
      font-size: 1.5rem;
      font-family: bold;
      background: linear-gradient(135deg,black,black);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
    }

    .navbar-brand img {
      height: 70px;
      width: 70px;
    }

    /* Hero Banner */
    .workshop-hero {
      background: linear-gradient(135deg, #cffafe 0%, #a5f3fc 30%, #ffffff 70%);
      padding: 80px 0 40px;
      position: relative;
      overflow: hidden;
    }

    .workshop-hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(6, 182, 212, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(8, 145, 178, 0.08) 0%, transparent 50%);
      pointer-events: none;
    }

    .workshop-hero .container {
      position: relative;
      z-index: 1;
    }

    .workshop-title {
      font-size: 3rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 1rem;
    }

    .workshop-title span {
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .workshop-badge {
      display: inline-block;
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      color: #ffffff;
      padding: 0.5rem 1.5rem;
      border-radius: 25px;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    /* Content Section */
    .content-section {
      padding: 60px 0;
      background: #ffffff;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 3px solid #a5f3fc;
    }

    .section-title span {
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .module-item {
      background: #f9fafb;
      padding: 1.5rem;
      border-radius: 15px;
      margin-bottom: 1rem;
      border-left: 4px solid #06b6d4;
      transition: all 0.3s ease;
    }

    .module-item:hover {
      transform: translateX(10px);
      box-shadow: 0 5px 15px rgba(6, 182, 212, 0.1);
    }

    .module-title {
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 0.5rem;
    }

    .module-desc {
      color: #6b7280;
      margin: 0;
    }

    /* Registration Form */
    .registration-section {
      background: #f9fafb;
      padding: 60px 0;
    }

    .form-container {
      background: #ffffff;
      padding: 3rem;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
    }

    .form-label {
      color: #1f2937;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .form-control,
    .form-select {
      padding: 0.8rem;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .form-control:focus,
    .form-select:focus {
      border-color: #06b6d4;
      box-shadow: 0 0 0 0.2rem rgba(6, 182, 212, 0.1);
    }

    .btn-submit {
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      color: #ffffff;
      padding: 1rem 3rem;
      border-radius: 50px;
      font-weight: 700;
      border: none;
      width: 100%;
      transition: all 0.3s ease;
      font-size: 1.1rem;
    }

    .btn-submit:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(6, 182, 212, 0.4);
    }

    .price-badge {
      background: linear-gradient(135deg, #ecfeff, #cffafe);
      padding: 1.5rem;
      border-radius: 15px;
      border: 2px solid #a5f3fc;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .price-amount {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    footer {
      background: #111827;
      padding: 3rem 0;
      color: #9ca3af;
    }

    footer a {
      color: #06b6d4;
      text-decoration: none;
    }

    footer a:hover {
      color: #0891b2;
    }

    @media (max-width: 768px) {
      .workshop-title {
        font-size: 2rem;
      }
      .form-container {
        padding: 2rem 1.5rem;
      }
    }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
      <a class="navbar-brand" href="index.html" style="display: flex; align-items: center; gap: 12px;">
        <img src="assets/images/logo2.png" alt="Logo">
        <span>VirtualChem Labs</span>
      </a>
      </a>
    </div>
  </nav>

  <section class="workshop-hero">
    <div class="container">
      <span class="workshop-badge" id="workshopBadge">Beginner Level</span>
      <h1 class="workshop-title" id="workshopTitle">Computational Chemistry <span>Workshop</span></h1>
      <p class="lead" id="workshopSubtitle" style="color: #4b5563;">Master the fundamentals of molecular modeling and simulations</p>
    </div>
  </section>

  <section class="content-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <div class="section-title"><span>What You'll</span> Learn</div>
          <div id="learningModules">
            <div class="module-item">
              <div class="module-title">Module 1: Introduction to Computational Chemistry</div>
              <p class="module-desc">Overview of computational methods, applications, and software tools.</p>
            </div>
            <div class="module-item">
              <div class="module-title">Module 2: Molecular Modeling Basics</div>
              <p class="module-desc">Build, visualize, and manipulate molecular structures.</p>
            </div>
            <div class="module-item">
              <div class="module-title">Module 3: Energy Calculations</div>
              <p class="module-desc">Potential energy surfaces and optimization techniques.</p>
            </div>
            <div class="module-item">
              <div class="module-title">Module 4: Introduction to Quantum Mechanics</div>
              <p class="module-desc">Basic quantum principles applied to molecules.</p>
            </div>
            <div class="module-item">
              <div class="module-title">Module 5: Practical Applications</div>
              <p class="module-desc">Hands-on projects and data analysis.</p>
            </div>
          </div>

          <div class="section-title mt-5"><span>Who Should</span> Attend</div>
          <div id="targetAudience">
            <ul style="list-style: none; padding: 0;">
              <li style="padding: 0.8rem; background: #f9fafb; margin-bottom: 0.5rem; border-radius: 10px; border-left: 4px solid #06b6d4;">‚úì Undergraduate and graduate students in chemistry</li>
              <li style="padding: 0.8rem; background: #f9fafb; margin-bottom: 0.5rem; border-radius: 10px; border-left: 4px solid #06b6d4;">‚úì Researchers adding computational skills</li>
              <li style="padding: 0.8rem; background: #f9fafb; margin-bottom: 0.5rem; border-radius: 10px; border-left: 4px solid #06b6d4;">‚úì Educators integrating computational methods</li>
              <li style="padding: 0.8rem; background: #f9fafb; margin-bottom: 0.5rem; border-radius: 10px; border-left: 4px solid #06b6d4;">‚úì Anyone interested in chemistry simulations</li>
            </ul>
          </div>

          <div class="section-title mt-5"><span>Workshop</span> Details</div>
          <div id="workshopDetails">
            <div style="display: flex; gap: 1rem; padding: 1rem; background: #f9fafb; margin-bottom: 0.8rem; border-radius: 10px;">
              <span style="font-size: 1.5rem;">üìÖ</span>
              <span style="color: #4b5563;">Duration: 4 weeks (12 hours total)</span>
            </div>
            <div style="display: flex; gap: 1rem; padding: 1rem; background: #f9fafb; margin-bottom: 0.8rem; border-radius: 10px;">
              <span style="font-size: 1.5rem;">üé•</span>
              <span style="color: #4b5563;">Format: Live online + recorded lectures</span>
            </div>
            <div style="display: flex; gap: 1rem; padding: 1rem; background: #f9fafb; margin-bottom: 0.8rem; border-radius: 10px;">
              <span style="font-size: 1.5rem;">üíª</span>
              <span style="color: #4b5563;">Requirements: Computer with internet</span>
            </div>
            <div style="display: flex; gap: 1rem; padding: 1rem; background: #f9fafb; margin-bottom: 0.8rem; border-radius: 10px;">
              <span style="font-size: 1.5rem;">üìú</span>
              <span style="color: #4b5563;">Certificate: Upon completion</span>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div style="position: sticky; top: 100px;">
            <div class="price-badge">
              <div style="color: #6b7280; font-size: 0.9rem; margin-bottom: 0.5rem;">Starting from</div>
              <div class="price-amount">‚Çπ300</div>
              <div style="color: #6b7280; font-size: 0.9rem; margin-top: 0.5rem;">per participant</div>
            </div>
            <a href="#registration-form" class="btn-submit" style="text-decoration: none; display: block; text-align: center;">Register Now</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="registration-section" id="registration-form">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="form-container">
            <h2 class="text-center mb-4" style="font-weight: 700;">Workshop <span style="background: linear-gradient(135deg, #06b6d4, #0891b2); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Registration</span></h2>
            
            <form id="registrationForm">
              <input type="hidden" id="workshopTitle" name="workshopTitle" value="Computational Chemistry Workshop">

              <div class="mb-3">
                <label class="form-label">Full Name *</label>
                <input type="text" class="form-control" name="name" placeholder="Enter your full name" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Email Address *</label>
                <input type="email" class="form-control" name="email" placeholder="your.email@example.com" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Affiliation / Organization *</label>
                <input type="text" class="form-control" name="affiliation" placeholder="e.g., Delhi University" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Role / Designation *</label>
                <select class="form-select" name="designation" id="designation" required>
                  <option value="">Select your role</option>
                  <option value="Student">UG/PG Student (‚Çπ300)</option>
                  <option value="Faculty">Faculty (‚Çπ600)</option>
                  <option value="Researcher">Researcher (‚Çπ600)</option>
                  <option value="Industry Professional">Industry Professional (‚Çπ900)</option>
                  <option value="Other">Other (‚Çπ500)</option>
                </select>
              </div>

              <div class="mb-3">
                <label class="form-label">Mobile Number (WhatsApp Preferred) *</label>
                <input type="tel" class="form-control" name="phone" placeholder="+91 9876543210" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Country *</label>
                <select class="form-select" name="country" required>
                  <option value="">Select Country</option>
                  <option>India</option>
                  <option>United States</option>
                  <option>United Kingdom</option>
                  <option>Canada</option>
                  <option>Australia</option>
                  <option>Germany</option>
                  <option>France</option>
                  <option>Japan</option>
                  <option>China</option>
                  <option>Singapore</option>
                  <option>UAE</option>
                  <option>Saudi Arabia</option>
                  <option>Other</option>
                </select>
              </div>

              <div class="mb-3">
                <label class="form-label">Experience with DFT Calculations *</label>
                <select class="form-select" name="experience" required>
                  <option value="">Select Level</option>
                  <option value="Novice">Novice - No experience</option>
                  <option value="Beginner">Beginner - Basic knowledge</option>
                  <option value="Intermediate">Intermediate - Some experience</option>
                  <option value="Advanced">Advanced - Extensive experience</option>
                </select>
              </div>

              <div class="mb-3">
                <label class="form-label">Topics / Questions to be Covered (Optional)</label>
                <textarea class="form-control" name="questions" rows="3" placeholder="Any specific topics you'd like us to cover..."></textarea>
              </div>

              <div class="price-badge" id="selectedFee" style="display: none;">
                <div style="color: #6b7280; font-size: 1rem;">Workshop Fee</div>
                <div class="price-amount" id="feeAmount">‚Çπ0</div>
              </div>

              <button type="submit" class="btn-submit">Complete Registration</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="text-center">
    <div class="container">
      <p>¬© <span id="year"></span> VirtualChemLab | Powered by <a href="#">Virtual Chem Labs</a></p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    // Fixed Registration Form Script
// Replace the existing script section in your HTML with this

document.getElementById("year").textContent = new Date().getFullYear();

// Update fee display when designation changes
const designationSelect = document.getElementById('designation');
const feeDisplay = document.getElementById('selectedFee');
const feeAmount = document.getElementById('feeAmount');

if (designationSelect && feeDisplay && feeAmount) {
  designationSelect.addEventListener('change', function() {
    const fees = {
      'Student': 300,
      'Faculty': 600,
      'Researcher': 600,
      'Industry Professional': 900,
      'Other': 500
    };
    
    const fee = fees[this.value] || 0;
    
    if (fee > 0) {
      feeAmount.textContent = '‚Çπ' + fee;
      feeDisplay.style.display = 'block';
    } else {
      feeDisplay.style.display = 'none';
    }
  });
}

// Single form submission handler
const registrationForm = document.getElementById('registrationForm');

if (registrationForm) {
  registrationForm.addEventListener('submit', async function (e) {
    e.preventDefault();
    
    console.log('Form submitted'); // Debug log
    
    const formData = new FormData(this);
    const data = Object.fromEntries(formData.entries());
    
    // Add fees based on designation
    const fees = {
      'Student': 300,
      'Faculty': 600,
      'Researcher': 600,
      'Industry Professional': 900,
      'Other': 500
    };
    data.fees = fees[data.designation] || 0;
    
    console.log('Form data:', data); // Debug log
    
    // Show loading
    Swal.fire({
      title: "Submitting...",
      text: "Please wait while we process your registration.",
      allowOutsideClick: false,
      showConfirmButton: false,
      didOpen: () => {
        Swal.showLoading();
      }
    });
    
    try {
      console.log('Sending request to server...'); // Debug log
      
      const res = await fetch("http://localhost:5000/api/register", {
        method: "POST",
        headers: { 
          "Content-Type": "application/json",
          "Accept": "application/json"
        },
        body: JSON.stringify(data),
      });
      
      console.log('Response status:', res.status); // Debug log
      
      const result = await res.json();
      console.log('Response data:', result); // Debug log
      
      if (result.status === "success" || res.ok) {
        Swal.fire({
          icon: "success",
          title: "üéâ Registration Successful!",
          html: `
            <div style="text-align: left; padding: 20px; background: #f0f9ff; border-radius: 10px; margin: 10px 0;">
              <p style="font-size: 18px; margin-bottom: 15px; color: #0891b2; font-weight: bold;">
                ‚úÖ Thank you for registering, ${data.name}!
              </p>
              <p style="font-size: 15px; color: #1f2937; margin-bottom: 10px;">
                <strong>Workshop:</strong> ${data.workshopTitle}
              </p>
              <p style="font-size: 15px; color: #1f2937; margin-bottom: 10px;">
                <strong>Registration Fee:</strong> ‚Çπ${data.fees}
              </p>
              <hr style="margin: 15px 0; border-color: #a5f3fc;">
              <p style="font-size: 14px; color: #4b5563; margin-bottom: 10px;">
                üìß A confirmation email has been sent to:<br>
                <strong style="color: #0891b2;">${data.email}</strong>
              </p>
              <p style="font-size: 14px; color: #4b5563; margin-top: 15px; padding: 10px; background: #ecfeff; border-radius: 5px; border-left: 3px solid #06b6d4;">
                <strong>Next Steps:</strong><br>
                ‚Ä¢ Check your email for workshop details<br>
                ‚Ä¢ Payment instructions will be sent within 24 hours<br>
                ‚Ä¢ Join link will be shared 1 day before the workshop
              </p>
            </div>
          `,
          confirmButtonColor: "#06b6d4",
          confirmButtonText: "Great! Got it üëç",
          width: '600px',
          customClass: {
            popup: 'animate__animated animate__fadeInDown'
          }
        });
        
        // Reset form
        this.reset();
        if (feeDisplay) {
          feeDisplay.style.display = 'none';
        }
        
      } else {
        throw new Error(result.message || 'Registration failed');
      }
      
    } catch (error) {
      console.error("Registration Error:", error);
      
      // Check if it's a network error (server not running)
      if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
        Swal.fire({
          icon: "warning",
          title: "‚ö†Ô∏è Server Connection Issue",
          html: `
            <div style="text-align: left; padding: 20px;">
              <p style="font-size: 15px; margin-bottom: 15px;">
                <strong>Your registration data is ready, but we couldn't connect to the server.</strong>
              </p>
              <p style="font-size: 14px; color: #666; margin-bottom: 10px;">
                This usually means:
              </p>
              <ul style="text-align: left; color: #666; font-size: 14px;">
                <li>The backend server is not running</li>
                <li>The server URL might be incorrect</li>
              </ul>
              <hr style="margin: 15px 0;">
              <p style="font-size: 14px; color: #0891b2; font-weight: bold;">
                üìã Your Information:
              </p>
              <pre style="background: #f3f4f6; padding: 10px; border-radius: 5px; font-size: 12px; text-align: left; overflow-x: auto;">${JSON.stringify(data, null, 2)}</pre>
              <p style="font-size: 13px; color: #666; margin-top: 10px;">
                Please contact us directly at:<br>
                üìß virtualchemlab@gmail.com<br>
                üì± +91-9876543210
              </p>
            </div>
          `,
          confirmButtonColor: "#06b6d4",
          confirmButtonText: "I'll Contact Directly",
          width: '650px'
        });
      } else {
        Swal.fire({
          icon: "error",
          title: "‚ùå Registration Error",
          html: `
            <p style="font-size: 15px; margin-bottom: 10px;">
              ${error.message || "Something went wrong. Please try again."}
            </p>
            <p style="font-size: 13px; color: #666;">
              If the problem persists, please contact us at:<br>
              üìß virtualchemlab@gmail.com
            </p>
          `,
          confirmButtonColor: "#ef4444",
          confirmButtonText: "Try Again"
        });
      }
    }
  });
}

// Smooth scroll to registration form
document.querySelectorAll('a[href="#registration-form"]').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.getElementById('registration-form');
    if (target) {
      target.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

console.log('‚úÖ Registration script loaded successfully');
  </script>

</body>
</html>